<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product details</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Play&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=League+Gothic&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/styles/index.css">
  <link rel="stylesheet" href="/styles/view-product.css">
</head>
<body>

<div id="loader" class="loader">
  <p>Зареждане</p>
  <img src="/icons/loader.gif" alt="Loading...">
</div>

<div class="everything-without-loader">
<nav th:replace="~{fragments/commons::nav}"></nav>

<main class="main-content">
  <section id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="carousel-image d-block" th:src="@{${image1}}" alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="carousel-image d-block" th:src="@{${image2}}" alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="carousel-image d-block" th:src="@{${image3}}" alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </a>
  </section>


  <form th:object="${cartItemDTO}" th:action="@{/add-product}" th:method="post" class="product-info">
    <div class="header-container">
    <h1 th:text="${productName}" id="productName" class="product-name"></h1>
    </div>

    <div class="description-container">
    <p class="product-description" th:text="${productDescription}">Дишащи спортни чорапи</p>
    </div>
    <p class="product-price" >Цена: <span class="value" th:text="${productPrice}"></span>лв</p>

    <div class="size-quantity-div">

      <div class="size">
        <h5>Размер:</h5>
        <a type="button" class="size-button" id="showModalBtn" ><img class="scale-image" src="/icons/scale.png" alt="Sorry your browser doesnt support the image.">
          Виж размер</a>
      </div>

      <div class="quantity-input">
        <h5>Брой-чифта:</h5>
        <div class="quantity-flex">
          <button type="button" class="quantity-btn down" aria-label="Decrease quantity"></button>
          <span  id="quantity" style="font-size: 1.2em;">1</span>
          <button type="button" class="quantity-btn up" aria-label="Increase quantity"></button>
        </div>
      </div>
    </div>
    <input type="text" style="display: none" th:field="*{productName}" id="productInput">
    <input type="text" style="display: none" th:field="*{quantity}" id="quantity-input">
    <button id="showAlert" type="submit" class="add-to-cart-btn">+Добави в количката</button>
  </form>
</main>


<footer th:replace="~{fragments/commons::footer}"></footer>

  <span id="width" style="display: none" th:text="${width}"></span>
  <span id="length" style="display: none" th:text="${length}"></span>
  <span id="height" style="display: none" th:text="${height}"></span>

  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>

      <div class="modal-flex">
        <h2>Ръководство за размери</h2>
        <div class="table-container">
          <table class="responsive-table">
            <tr>
              <td>Размери</td>
              <td>Дължина</td>
              <td>Широчина</td>
              <td>Височина</td>
            </tr>
            <tr>
              <td>универсален размер</td>
              <td> <span id="length-span"></span> см</td>
              <td> <span id="width-span"></span> см</td>
              <td> <span id="height-span"></span> см</td>
            </tr>
          </table>
        </div>
        <div class="help">
          <a type="button" id="measure-help">Как се измерва?</a>
        </div>
      </div>
    </div>
  </div>

  <div id="modal-help" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>

      <div class="help-flex">
        <h2>Как измерваме продукт?</h2>
        <div class="help-content-flex">
          <div style="display: flex; flex-direction: column; row-gap: 2%;">
            <h4>1. Дължина</h4>
            <h4>2. Височина</h4>
            <h4>3. Широчина</h4>
          </div>
          <img id="help-image" src="/images/mesurements.webp" alt="">
        </div>
      </div>
    </div>
  </div>

</div>

<script src="/scripts/size-pop-up.js"></script>
<script src="/scripts/loader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="/scripts/quantity.js"></script>
<script>
    // Function to synchronize the target field with the source field
    function synchronizeFields() {
    // Get references to the fields
    const sourceField = document.getElementById('quantity');
    const targetField = document.getElementById('quantity-input');

    // Attach an event listener to the source field
    sourceField.addEventListener('change', function() {
    // Update the target field with the value of the source field
    targetField.value = sourceField.textContent;
  });
  }

    // Initialize the synchronization when the document is ready
    document.addEventListener('DOMContentLoaded', synchronizeFields);
</script>

</body>
</html>
