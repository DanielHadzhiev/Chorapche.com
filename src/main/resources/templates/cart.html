<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="/icons/android-chrome-512x512.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Play&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=League+Gothic&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Play&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/styles/index.css">
<link rel="stylesheet" href="/styles/cart.css">
</head>
<body>

<div id="loader" class="loader">
    <p>Зареждане</p>
    <img src="/icons/loader.gif" alt="Loading...">
</div>

<div class="everything-without-loader">
<nav th:replace="~{fragments/commons::nav}"></nav>

   <main class="cont">
    <h2>Kошница</h2>
    <hr>
       <!-- Check if the products list is empty -->
       <div th:if="${#lists.isEmpty(cartItems)}">
           <h3>Няма продукти в кошницата...</h3>
       </div>

       <!-- Display products if not empty -->
       <div class="product-cont" th:unless="${#lists.isEmpty(cartItems)}">
           <div th:each="cartItem : ${cartItems}" class="product-item">
               <img id="product-image" th:src="@{${cartItem.product.mainImageUrl}}" alt="Product image">
               <div class="product-info">
               <h4 th:text="${cartItem.product.name}">Product Name</h4>
               <div class="price-quantity-div">
               <span><span th:text="${@formatUtils.formatDecimal(cartItem.product.price * cartItem.quantity, 2)}">Product Price</span>лв</span>
               <span><span th:text="${cartItem.quantity}">Product Quantity</span> чифт/чифта</span>
               </div>
               <a th:href="@{/cart/delete-product/{productName}(productName=${cartItem.product.name})}" id="delete-item">Премахни</a>
               </div>
           </div>
       </div>
    <hr>
    <div>

    </div>
    <form th:action="@{/order-info}" th:method="get" th:unless="${#lists.isEmpty(cartItems)}" class="sub-main">
      <button type="submit" class="next-step-btn"><span>Следваща стъпка</span></button>
        <p id="total-value">Общо: <span th:text="${totalCost}"></span>лв</p>
    </form>
   </main>

<footer th:replace="~{fragments/commons::footer}"></footer>
</div>
<script src="/scripts/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>
</html>